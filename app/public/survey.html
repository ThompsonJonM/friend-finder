<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <!--jQuery CDN (ALWAYS before Mat CDN) -->
    <script src="http://code.jquery.com/jquery-3.2.1.min.js"
    integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
    crossorigin="anonymous"></script>

    <!-- Minified Materialize CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.1/css/materialize.min.css">

    <!-- Minified Materialize JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.1/js/materialize.min.js"></script>

    <!--Materialize Icons  -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <title>Friend-Finder Survey</title>
</head>
<body>

    <div class="container">
        <div class="jumbotron">
            <h1 class="surveyTitle center">Survey Questions</h1>

            <hr>

            <br>

            <div class="button center">
                <a href="/"><button class="btn waves-effect waves-light red">I'd Rather Not Risk Our Friendship</button></a>
            </div>
        </div>
    </div>

    <br>

    <div class="container">
        <div class="row">
            <form class="col s12 m12 l12" method="POST" action="/api/friends">
                    <label for="nameEntry"><h5>Name<h5></label>
                    <div class="input-field col s12 m12 l12">
                        <input placeholder="Please Enter Your Name" id="nameEntry" type="text" class="validate">
                    </div>

                    <label for="photoLink"><h5>Photo Upload</h5></label>
                    <div class="input-field col s12 m12 l12">
                        <input placeholder="Please Enter a Valid Photo Link" id="photoLink" type="text">
                    </div>

                    <label for="questionOne"><h5>1. Your mind is always buzzing with unexplored ideas and plans.</h5></label>
                    <div class="input-field col s12 m12 l12">
                        <select id="questionOne">
                            <option value="" disabled selected>Choose your Option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3 (Neutral)</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                    </div>

                    <label for="questionTwo"><h5>2. Generally speaking, you rely more on your experience than your imagination.</h5></label>
                    <div class="input-field col s12 m12 l12">
                        <select id="questionTwo">
                            <option value="" disabled selected>Choose your Option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3 (Neutral)</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                    </div>

                    <label for="questionThree"><h5>3. You find it easy to stay relaxed and focused, even when there is some pressure.</h5></label>
                    <div class="input-field col s12 m12 l12">
                        <select id="questionThree">
                            <option value="" disabled selected>Choose your Option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3 (Neutral)</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                    </div>

                    <label for="questionFour"><h5>4. You rarely do something out of sheer curiosity.</h5></label>
                    <div class="input-field col s12 m12 l12">
                        <select id="questionFour">
                            <option value="" disabled selected>Choose your Option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3 (Neutral)</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                    </div>

                    <label for="questionFive"><h5>5. People rarely upset you.</h5></label>
                    <div class="input-field col s12 m12 l12">
                        <select id="questionFive">
                            <option value="" disabled selected>Choose your Option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3 (Neutral)</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                    </div>

                    <label for="questionSix"><h5>6. It is often difficult for you to relate to other's feelings.</h5></label>
                    <div class="input-field col s12 m12 l12">
                        <select id="questionSix">
                            <option value="" disabled selected>Choose your Option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3 (Neutral)</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                    </div>

                    <label for="questionSeven"><h5>7. In a discussion, you feel that truths should be more important than people's sensitivities.</h5></label>
                    <div class="input-field col s12 m12 l12">
                        <select id="questionSeven">
                            <option value="" disabled selected>Choose your Option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3 (Neutral)</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                    </div>

                    <label for="questionEight"><h5>8. You rarely get carried away by fantasies and ideas.</h5></label>
                    <div class="input-field col s12 m12 l12">
                        <select id="questionEight">
                            <option value="" disabled selected>Choose your Option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3 (Neutral)</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                    </div>

                    <label for="questionNine"><h5>9. You do not mind taking a quiz to date one of your friends.</h5></label>
                    <div class="input-field col s12 m12 l12">
                        <select id="questionNine">
                            <option value="" disabled selected>Choose your Option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3 (Neutral)</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                    </div>

                    <label for="questionTen"><h5>10. You do not think dating a friend is a bad thing.</h5></label>
                    <div class="input-field col s12 m12 l12">
                        <select id="questionTen">
                            <option value="" disabled selected>Choose your Option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3 (Neutral)</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                    </div>

            </form>
        </div>

        <br>

        <div class="row">
            <div class="button left">
                <button class="btn waves-effect waves-light blue" id="submit" type="submit" name="action">
                    <i class="material-icons left">send</i>Submit
                </button>
            </div>
        </div>
        <br>
        <br>
        <!--Test  -->
        <a href="/api/friends">Previous Results</a>
    </div>

    <div id="bestMatchResults" class="modal">
        <div class="modal-header"> 
            <h2>Best Match</h2>
        </div>

        <div class="modal-content">
            <h2 id="bestMatchName"></h2>
            <img id="bestMatchPhoto" src="" alt="" width=400px>
        </div>
    </div>

    <script type="text/javascript">

        // Initialize Materialize select function on document ready
        $(document).ready(function() {
            $('select').material_select();
        });

        // Initialize Materialize modal on doc ready
        $(document).ready(function() {
            $('.modal').modal({
                dismissable: true,
                endingTop: '30%',
                ready: function(modal, trigger) {
                    console.log(modal, trigger);
                }
            });
        });

        // On Click for Submit
        $('#submit').on('click', function(event) {
            event.preventDefault();

            var friendInput = {
                name: $('#nameEntry').val().trim(),
                photo: $('#photoLink').val().trim(),
                scores: [
                    $('#questionOne').val().trim(),
                    $('#questionTwo').val().trim(), 
                    $('#questionThree').val().trim(), 
                    $('#questionFour').val().trim(), 
                    $('#questionFive').val().trim(), 
                    $('#questionSix').val().trim(), 
                    $('#questionSeven').val().trim(), 
                    $('#questionEight').val().trim(), 
                    $('#questionNine').val().trim(), 
                    $('#questionTen').val().trim()
                ]
            }

            var currentURL = window.location.origin;

            $.post(currentURL + '/api/friends', friendInput, function(data) {
                $('#bestMatchName').text(data.name);
                $('#bestMatchPhoto').attr("src", data.photo);
                $('#bestMatchResults').modal('open');
            });

            return false;
        });

    </script>

</body>
</html>