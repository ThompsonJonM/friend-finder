<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <!--jQuery CDN (ALWAYS before Mat CDN) -->
    <script src="http://code.jquery.com/jquery-3.2.1.min.js"
    integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
    crossorigin="anonymous"></script>

    <!-- Minified Materialize CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.1/css/materialize.min.css">

    <!-- Minified Materialize JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.1/js/materialize.min.js"></script>

    <!--Materialize Icons  -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <title>Friend-Finder Survey</title>
</head>
<body>

    <div class="container">
        <div class="jumbotron">
            <h1 class="surveyTitle center">Survey Questions</h1>

            <hr>

            <br>

            <div class="button center">
                <a href="/"><button class="btn waves-effect waves-light red">I'd Rather Not Risk Our Friendship</button></a>
            </div>
        </div>
    </div>

    <br>

    <div class="container">
        <div class="row">
            <form class="col s12 m12 l12" method="POST" action="/api/friends">
                    <label for="nameEntry"><h5>Name<h5></label>
                    <div class="input-field col s12 m12 l12">
                        <input placeholder="Please Enter Your Name" id="nameEntry" type="text" class="validate">
                    </div>

                    <label for="photoLink"><h5>Photo Upload</h5></label>
                    <div class="input-field col s12 m12 l12">
                        <input placeholder="Please Enter a Valid Photo Link" id="photoLink" type="text">
                    </div>

                    <label for="questionOne"><h5>1. This is a Test Question for Later Update</h5></label>
                    <div class="input-field col s12 m12 l12">
                        <select id="questionOne">
                            <option value="" disabled selected>Choose your Option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3 (Neutral)</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                    </div>

                    <label for="questionTwo"><h5>2. This is a Test Question for Later Update</h5></label>
                    <div class="input-field col s12 m12 l12">
                        <select id="questionTwo">
                            <option value="" disabled selected>Choose your Option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3 (Neutral)</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                    </div>

                    <label for="questionThree"><h5>3. This is a Test Question for Later Update</h5></label>
                    <div class="input-field col s12 m12 l12">
                        <select id="questionThree">
                            <option value="" disabled selected>Choose your Option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3 (Neutral)</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                    </div>

                    <label for="questionFour"><h5>4. This is a Test Question for Later Update</h5></label>
                    <div class="input-field col s12 m12 l12">
                        <select id="questionFour">
                            <option value="" disabled selected>Choose your Option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3 (Neutral)</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                    </div>

                    <label for="questionFive"><h5>5. This is a Test Question for Later Update</h5></label>
                    <div class="input-field col s12 m12 l12">
                        <select id="questionFive">
                            <option value="" disabled selected>Choose your Option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3 (Neutral)</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                    </div>

                    <label for="questionSix"><h5>6. This is a Test Question for Later Update</h5></label>
                    <div class="input-field col s12 m12 l12">
                        <select id="questionSix">
                            <option value="" disabled selected>Choose your Option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3 (Neutral)</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                    </div>

                    <label for="questionSeven"><h5>7. This is a Test Question for Later Update</h5></label>
                    <div class="input-field col s12 m12 l12">
                        <select id="questionSeven">
                            <option value="" disabled selected>Choose your Option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3 (Neutral)</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                    </div>

                    <label for="questionEight"><h5>8. This is a Test Question for Later Update</h5></label>
                    <div class="input-field col s12 m12 l12">
                        <select id="questionEight">
                            <option value="" disabled selected>Choose your Option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3 (Neutral)</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                    </div>

                    <label for="questionNine"><h5>9. This is a Test Question for Later Update</h5></label>
                    <div class="input-field col s12 m12 l12">
                        <select id="questionNine">
                            <option value="" disabled selected>Choose your Option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3 (Neutral)</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                    </div>

                    <label for="questionTen"><h5>10. This is a Test Question for Later Update</h5></label>
                    <div class="input-field col s12 m12 l12">
                        <select id="questionTen">
                            <option value="" disabled selected>Choose your Option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3 (Neutral)</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                    </div>

            </form>
        </div>

        <br>

        <div class="row">
            <div class="button left">
                <button class="btn waves-effect waves-light blue" id="submit" type="submit" name="action">
                    <i class="material-icons left">send</i>Submit
                </button>
            </div>
        </div>
    </div>

    <div id="bestMatchResults" class="modal bottom-sheet">
        <div class="modal-header"> 
            <h2>Best Match</h2>
        </div>

        <div class="modal-content">
            <h2 id="bestMatchName"></h2>
            <img id="bestMatchPhoto" src="" alt>
        </div>
    </div>

    <script type="text/javascript">

        // Initialize Materialize select function on document ready
        $(document).ready(function() {
            $('select').material_select();
        });

        // Initialize Materialize modal on doc ready
        $(document).ready(function() {
            $('.modal').modal({
                dismissable: true
            });
        });

        // On Click for Submit
        $('#submit').on('click', function(event) {
            event.preventDefault();

            var friendInput = {
                name: $('#nameEntry').val().trim(),
                photo: $('#photoLink').val().trim(),
                scores: [
                    $('#questionOne').val().trim(),
                    $('#questionTwo').val().trim(), 
                    $('#questionThree').val().trim(), 
                    $('#questionFour').val().trim(), 
                    $('#questionFive').val().trim(), 
                    $('#questionSix').val().trim(), 
                    $('#questionSeven').val().trim(), 
                    $('#questionEight').val().trim(), 
                    $('#questionNine').val().trim(), 
                    $('#questionTen').val().trim()
                ]
            }

            var currentURL = window.location.origin;

            $.post(currentURL + '/api/friends', friendInput, function(data) {
                $('#bestMatchName').text(data.name);
                $('#bestmatchPhoto').text(data.photo);
                $('#bestMatchResults').modal('toggle');
            });

            return false;
        });

    </script>

</body>
</html>